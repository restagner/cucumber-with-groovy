package cucumber

def scriptContext = context(
        filetypes: ['.groovy'],
        pathRegexp: ".*/test/groovy/cucumber/.*",
        scope: closureScope())

contributor(scriptContext) {
    property name: 'dsl', type: 'cucumber.support.CucumberWithGroovyWorld'

    def methods = findClass('cucumber.helpers.MyHelper').methods
//    methods.addAll(findClass('cucumber.support.TestEnvironment').methods)
    methods.each { def theMethod ->

        def params = [:]
        theMethod.parameterList.parameters.each { param ->
            params.put(
                    param.name,
                    com.intellij.psi.util.TypeConversionUtil.erasure(param.type).canonicalText)
        }

        method name: theMethod.name, type: com.intellij.psi.util.TypeConversionUtil.erasure(theMethod.returnType)?.canonicalText, params: params
    }
}
